# 外部設計書

## 1. システム構成概要
本システムは、クライアントサイドで動作するシングルページアプリケーション（SPA）として設計されている。ユーザーインターフェースはHTML、スタイルはCSS、動的な処理はJavaScriptによって実装される。PDFの描画にはPDF.jsライブラリを使用する。

## 2. ユーザーインターフェース (UI)

### 2.1. 全体レイアウト
- ページ中央に主要な要素が配置され、シンプルで直感的なレイアウトとする。
- ヘッダーにタイトル「PDF Viewer」を配置する。

### 2.2. コントロールパネル
- 画面上部に以下のコントロール要素を配置する。
    - **PDFファイル選択**: `input type="file"` 要素により、PDFファイルのアップロードを促す。
    - **表示モード切り替え**: トグルスイッチ（チェックボックス）により、「ページ送りモード」と「スクロールモード」を切り替える。
        - デフォルトは「スクロールモード」。
    - **ズームコントロール**: 「-」（縮小）、「リセット」、「+」（拡大）の3つのボタンを配置する。
    - **PDFダウンロードボタン**: PDF読み込み後に表示され、現在のPDFをダウンロードできる。

### 2.3. PDFビューア領域
- コントロールパネルの下に、PDFが表示されるメイン領域 (`#viewer-container`) を配置する。
- スクロールモードでは、この領域内でPDF全体がスクロール可能となる。
- ページ送りモードでは、この領域に1ページのみが表示される。

### 2.4. ページネーションコントロール (ページ送りモード時のみ)
- ページ送りモード時に、ビューア領域の下に以下のコントロールを配置する。
    - 「前へ」ボタン: 前のページへ移動する。
    - 現在のページ数表示: 「現在のページ / 総ページ数」の形式で表示する。
    - 「次へ」ボタン: 次のページへ移動する。

### 2.5. 右クリックメニュー
- PDFビューア領域内のテキスト上で右クリックすると、コンテキストメニューが表示される。
- 表示位置は、右クリックしたマウスカーソルの位置を基準に調整される。
- メニュー項目:
    - 「コピー」: 選択中のテキストをクリップボードにコピーする。テキストが選択されていない場合は無効化される。
    - 「全選択」: 現在表示されているページの全テキストを選択する。

### 2.6. メッセージ表示
- テキストコピー成功時など、ユーザーへのフィードバックが必要な場合に、画面右下に一時的なメッセージ（トースト通知）を表示する。

## 3. ユーザーインタラクション (UX)

### 3.1. PDFアップロード
- ユーザーがファイルを選択すると、自動的にPDFの読み込みと表示が開始される。
- 読み込み中は、ローディングインジケーターが表示され、ユーザーに処理中であることを伝える。

### 3.2. 表示モード切り替え
- トグルスイッチの操作により、即座に表示モードが切り替わり、PDFの再描画が行われる。

### 3.3. ズーム操作
- ズームボタンをクリックすると、PDFの表示倍率が段階的に変更され、再描画される。
- リセットボタンで初期倍率に戻る。

### 3.4. ページナビゲーション (ページ送りモード)
- 「前へ」「次へ」ボタンをクリックすると、対応するページへスムーズに切り替わる。
- 最初のページでは「前へ」ボタンが、最後のページでは「次へ」ボタンが無効化される。

### 3.5. テキスト選択・コピー
- マウスドラッグでテキストを選択できる。
- 選択後、右クリックメニューまたは `Ctrl+C` でコピーできる。
- `Ctrl+A` で表示中の全テキストを選択できる。

### 3.6. PDFダウンロード
- ダウンロードボタンをクリックすると、表示中のPDFファイルがブラウザのダウンロード機能を通じて保存される。

## 4. 改訂履歴

| 日付       | バージョン | 変更内容                               | 著者     |
| :--------- | :--------- | :------------------------------------- | :------- |
| 2025/07/19 | 1.0.1      | PDFアップロード時のローディング表示追加 | Gemini   |